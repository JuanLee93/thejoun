<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="announce"> <!-- mapper파일의 이름 -->

	
	<insert id="announceInsert1" parameterType="announce.AnnounceVo" useGeneratedKeys="true">
		INSERT INTO announce (
			my_userno, friends_userno,  boardno, tablename, board_or_comment, commentno, regdate  
		) VALUES (
			#{my_userno}, #{friends_userno}, #{boardno}, 1, #{board_or_comment}, #{commentno}, NOW()
		)
		<selectKey keyProperty="announceno" resultType="int" order="AFTER">
			SELECT last_insert_id()
		</selectKey>
	</insert>
	
	<insert id="announceInsert2" parameterType="announce.AnnounceVo" useGeneratedKeys="true">
		INSERT INTO announce (
			my_userno, friends_userno,  boardno, tablename, board_or_comment, commentno, regdate  
		) VALUES (
			#{my_userno}, #{friends_userno}, #{boardno}, 2, #{board_or_comment}, #{commentno}, NOW()
		)
		<selectKey keyProperty="announceno" resultType="int" order="AFTER">
			SELECT last_insert_id()
		</selectKey>
	</insert>
	
	<insert id="announceInsert3" parameterType="announce.AnnounceVo" useGeneratedKeys="true">
		INSERT INTO announce (
			my_userno, friends_userno,  boardno, tablename, board_or_comment, commentno, regdate  
		) VALUES (
			#{my_userno}, #{friends_userno}, #{boardno}, 3, #{board_or_comment}, #{commentno}, NOW()
		)
		<selectKey keyProperty="announceno" resultType="int" order="AFTER">
			SELECT last_insert_id()
		</selectKey>
	</insert>
	
	<insert id="announceInsert4" parameterType="announce.AnnounceVo" useGeneratedKeys="true">
		INSERT INTO announce (
			my_userno, friends_userno,  boardno, tablename, board_or_comment, commentno, regdate  
		) VALUES (
			#{my_userno}, #{friends_userno}, #{boardno}, 4, #{board_or_comment}, #{commentno}, NOW()
		)
		<selectKey keyProperty="announceno" resultType="int" order="AFTER">
			SELECT last_insert_id()
		</selectKey>
	</insert>
	
	<select id="findMakeComment" parameterType="int" resultType="int">
		SELECT userno FROM comment WHERE gno = #{value} AND ono = 0 AND nested = 0
	</select>
	
	
	

</mapper>

